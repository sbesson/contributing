OMERO command line interface
============================

.. highlight:: bash

.. seealso::

    :doc:`/users/command-line-interface`
        User Documentation for the Command Line Interface

    :doc:`/users/command-line-interface`
        Developer Documentation for the Command Line Interface

When first beginning to work with the OMERO server, the ``db``,
``config``, and ``admin`` commands will be the first you will need.

``db``
------

Rather than try to provide the functionality of a RDBM tool like
``psql``, the ``db`` command helps to generate SQL scripts for building
your database. You can then use those scripts from whatever tool is most
comfortable for you::

    $ bin/omero db script OMERO4 0 secretpassword
    Using OMERO4 for version
    Using 0 for patch
    Using password from commandline
    Saving to /omero/OMERO4__0.sql
    $ psql omero < OMERO4__0.sql

``config``
----------

The ``config`` command is responsible for reading / writing
user-specific profiles. These are stored in platform-specific, protected
locations such as the registry on Windows, ``~/.java/.userPrefs`` on
Linux, or ``~/Library/Preferences`` on Mac OS X::

    $ bin/omero config def
    default

    $ bin/omero config get

    $ bin/omero config set example "my first value"

    $ bin/omero config get
    example=my first value

    $ OMERO_CONFIG=another bin/omero config def
    another

    $ OMERO_CONFIG=another bin/omero config get

    $ OMERO_CONFIG=another bin/omero config set example "my second value"

    $ OMERO_CONFIG=another bin/omero config get
    example=my second value

The values set via ``config`` override those compiled into the server
jars. The default values which are set can be seen in
``etc/omero.properties``. To add several values to a configuration, you
can pipe them via standard in::

    $ grep omero.ldap etc/omero.properties | OMERO_CONFIG=ldap bin/omero config load

    $ OMERO_CONFIG=ldap bin/omero config get
    omero.ldap.attributes=objectClass
    omero.ldap.base=ou=example,o=com
    omero.ldap.config=false
    omero.ldap.groups=
    omero.ldap.keyStore=
    omero.ldap.keyStorePassword=
    omero.ldap.new_user_group=default
    omero.ldap.password=
    omero.ldap.protocol=
    omero.ldap.trustStore=
    omero.ldap.trustStorePassword=
    omero.ldap.urls=ldap://localhost:389
    omero.ldap.username=
    omero.ldap.values=person

    $

Each of these values can then be modified to suit your local setup. To
remove on of the key-value pairs, pass no second argument::

    $ OMERO_CONFIG=ldap bin/omero config set omero.ldap.trustStore

    $ OMERO_CONFIG=ldap bin/omero config set omero.ldap.trustStorePassword

    $ OMERO_CONFIG=ldap bin/omero config set omero.ldap.keyStore

    $ OMERO_CONFIG=ldap bin/omero config set omero.ldap.keyStorePassword

    $ OMERO_CONFIG=ldap bin/omero config get
    omero.ldap.attributes=objectClass
    omero.ldap.base=ou=example,o=com
    omero.ldap.config=false
    omero.ldap.groups=
    omero.ldap.new_user_group=default
    omero.ldap.password=
    omero.ldap.protocol=
    omero.ldap.urls=ldap://localhost:389
    omero.ldap.username=
    omero.ldap.values=person

    $

if you will be using a particular profile more frequently you can set it
as your default::

    $ bin/omero config def ldap

And finally, if you would like to remove a profile, say to wipe a given
password off of a system, use "drop"::

    $ bin/omero config drop

``admin``
---------

Once your database has been properly configured and your config profile
is set to use that database, you're ready to start your server::

    $ bin/omero admin start
