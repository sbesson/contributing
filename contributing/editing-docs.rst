Editing the OME documentation
=============================

This guide assumes you are already familiar with :doc:`using-git` and GitHub
and only covers where to find the sources, builds etc. you will need to edit
and review any given content. Further information on the CI builds is
available on the :doc:`ci-docs` page.

Some of the live web documentation also features ‘Show on GitHub’ and ‘Edit on
Github’ links in the lefthand menu which will take you directly to the source
file and allow you to edit within the GH interface and then open a PR (you
should never use this functionality to edit autogenerated pages, see below for
details of these).

Overview
--------

This page covers technical documentation which is written in .rst files and
generated into html using Sphinx. There are sets for each aspect of the
project, plus this set of ‘contributing developer’ documentation aimed at
giving an overview of the OME process and workflows across products that might
be of interest to external people, and the OME internal docs for
internal-only private workflows and processes.

Some of the content for these is either autogenerated or copied from external
sources as described below. Formatting and style guidance can be found in the
`README <https://github.com/openmicroscopy/ome-documentation/blob/develop/README.rst>`_
for the ome-documentation repo, along with instructions for getting set up
with sphinx.

The jekyll websites hosted by OME, which include the Help workflow guides, are
covered on :doc:`jekyll`.

What goes where?
----------------

The decision trees below try to give an insight into the thought process
behind choosing what information to host where.

.. figure:: /images/project-decision-tree.png
    :align: center
    :alt: Project-wide information can be hosted privately in the internal
          docs or gdocs or publicly in this documentation or on the blog for
          news-worthy items
    
    Project-wide information

.. figure:: /images/product-decision-tree.png
    :align: center
    :alt: Product-specific information can be hosted in the sphinx docs or
          help site for instructions and how-tos while the website and/or blog
          can be used to highlight features and give an overview of
          functionality

    Product-specific information

Bio-Formats documentation
-------------------------

Hosted at `<https://docs.openmicroscopy.org/bio-formats/>`_\{{version}} (plus
latest redirect - :bf_doc:`docs.openmicroscopy.org/latest/bio-formats/ <>`)

This documentation covers all aspects of Bio-Formats - using it with other
tools, guidance of developers (specific to Bio-Formats rather than general OME
workflows which are covered in these contributing docs), and supported
formats. Related topics - OME file formats and the data model are covered in
the OME Data Model and File Formats documentation.

Builds
^^^^^^

See :doc:`ci-docs`.

Source
^^^^^^

The Sphinx documentation is in the ``/docs/sphinx/`` folder in the code
repository at `<https://github.com/openmicroscopy/bioformats>`_.

Content for autogenerating documentation is in ``/components/autogen/src/``.

Building locally
^^^^^^^^^^^^^^^^

The build uses Sphinx via ant. Within the Sphinx folder, ``make clean html``
will generate the webpages provided you have both Sphinx and ant installed.

Building/Reviewing PRs via the CI
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Once a PR is open, you can build it for review using the
:jenkinsjob:`BIOFORMATS-DEV-merge-docs` job on
the Jenkins CI. Staging documentation is no longer deployed at a URL but you
can download them as a zip for review with the correct styling by going to the
workspace folder in the job.

Autogenerated content
^^^^^^^^^^^^^^^^^^^^^

The following parts of the documentation are autogenerated from outside the
docs folder:

- Supported Formats table and format pages - generated from 
  :bf_source:`format-pages.txt <components/autogen/src/format-pages.txt>` - 
  **do not edit anything inside the** ``/formats`` **folder except the index**
- Dataset structure table - generated from the readers
- Metadata support table - generated from the reader

Generally, unless you are adding new file support, the format pages are the
only ones you are likely to be editing. There is documentation on :bf_doc:`Adding format/reader documentation pages <developers/format-documentation.html>` in the Bio-Formats developer section.

Publishing
^^^^^^^^^^

The live webpages are updated as part of the release process.

OME Contributing Developer documentation
----------------------------------------

Hosted at `<https://docs.openmicroscopy.org/contributing/>`_ (always latest).

This covers the OME team processes and workflows that may be of interest to
external contributors or other open source teams - information about what
tools we use and how rather than internal-only workflows (like standup prep)
or anything which needs to be kept private which belongs in the internal docs
instead.

Builds
^^^^^^

See :doc:`ci-docs`.

Source
^^^^^^

The source files are at `<https://github.com/openmicroscopy/ome-documentation>`_, in the
``/contributing`` folder.

Building locally
^^^^^^^^^^^^^^^^

The build uses Sphinx via ant. You can build locally using ``make clean html``
as long as you have Sphinx and ant installed. There is further information on
getting these set up and on build targets in the README.

Building/Reviewing PRs via the CI
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Once a PR is open, you can build it for review using the
:jenkinsjob:`CONTRIBUTING-merge-docs` job on the Jenkins CI. Staging
documentation is no longer deployed at a URL but you can download them as a
zip for review with the correct styling by going to the workspace folder in
the job.

Publishing
^^^^^^^^^^

The live webpages are updated by running the
:jenkinsjob:`CONTRIBUTING-latest-docs` build.

