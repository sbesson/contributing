Continuous integration branches and jobs
========================================

.. _openmicroscopy.git: https://github.com/openmicroscopy/openmicroscopy
.. _bioformats.git: https://github.com/openmicroscopy/bioformats
.. _ome-documentation.git: https://github.com/openmicroscopy/ome-documentation
.. _scripts.git: https://github.com/ome/scripts

Definitions
-----------

Versioning
^^^^^^^^^^

OME uses semantic versioning as defined in http://semver.org. Each version
number is identified as MAJOR.MINOR.PATCH where MAJOR is the major version
number, MINOR the minor version number and PATCH the patch version number.
Additional pre-release labels are added as extensions of this version number,
e.g. 4.4.0-rc1 or 5.0.0-beta1.

.. glossary::

	Major release

		An increment of the MAJOR version or the MINOR version is typically
		considered as a major release in OME, e.g. 4.4.0 or 5.0.0.

	Point release (patch release)

		An increment of the PATCH version is called a point (or patch) release
		in OME, e.g. 4.4.9.

Development branches
^^^^^^^^^^^^^^^^^^^^

Most of the OME code is split between four repositories: openmicroscopy.git_,
bioformats.git_, scripts.git_, ome-documentation.git_. For each repository,
two development branches are maintained simultaneously:

* The "dev_4_4" branch contains work on the 4.4.x series.

* The "dev_5_0" branch contains work on the 5.0.x series.

It is possible to have a point release immediately, while still working on
more major releases by ensuring that (nearly) all commits that are applied to
dev_4_4 are applied to develop in order to prevent regressions.

Labels
^^^^^^

Labels are applied to PRs on GitHub under the “Issues” tab of each repository.

The 4.4.x series consists of PRs labelled with “dev_4_4”, which 
is the name of the branch which they will be merged into.

The 5.0.x series consists of PRs labelled with “develop”, which is also
the name of the branch which they will be merged into.

Three labels are used in the PR reviewing process: “include”, “exclude”, and
"on hold". The “include” label allows you to include a PR opened by a
non-member of the OME organization in the merge builds for review. The
“exclude” label allows you to exclude a PR opened by any user from the merge
builds. The "on hold" label allows you to signal that a PR should not be
reviewed or merged, even though it is not excluded.


..  |merge| replace:: Merges PRs using :ref:`scc merge`
..  |buildOMERO| replace:: Builds the OMERO.server and the clients using :source:`OMERO.sh <docs/hudson/OMERO.sh>`
..  |archiveOMEROartifacts| replace:: Archives the build artifacts
..  |deployOMERO| replace:: Deploys the server under :file:`~/OMERO-CURRENT` on
..  |promoteOMERO| replace:: copies the artifacts to necromancer
..  |buildVM| replace:: Builds a |VM| using :source:`omerovm.sh <docs/install/VM/omerovm.sh>`
..  |updatesubmodules| replace:: Updates submodules using ``scc update-submodules``

Continuous integration server
-----------------------------

The OME project uses `Jenkins <http://jenkins-ci.org>`_ as a continuous
integration server. To access the OME Jenkins server, bring up a web
browser and go to http://ci.openmicroscopy.org.

The following sections summarize the main continuous integration jobs used for
the development of OMERO, Bio-Formats and the OME documentation sets. Note
this is not an exhaustive list of all jobs in the project. To know more about
a particular job, click on the :guilabel:`Configure` button on the left-side
panel of the job window.

OMERO jobs
----------

.. list-table::
	:header-rows: 1

	- 	* Job task
		* 4.4.x series
		* 5.0.x series

	- 	* Build OMERO
		* :term:`OMERO-stable` /
		  :term:`OMERO-stable-ice34` /
		  :term:`OMERO-stable-ice35`
		* :term:`OMERO-5.0-latest-ice33` /
		  :term:`OMERO-5.0-latest-ice34`
		  :term:`OMERO-5.0-latest-ice35`

	- 	* Build an OMERO Virtual Appliance
		* :term:`OMERO-stable-virtualbox`
		* :term:`OMERO-5.0-virtualbox`

	- 	* Run the daily merge builds
		* :term:`OMERO-merge-stable`
		* :term:`OMERO-5.0-merge-daily`

	- 	* Review OMERO PRs
		* :term:`OMERO-merge-stable-ice33` /
		  :term:`OMERO-merge-stable-ice34` /
		  :term:`OMERO-merge-stable-ice35`
		* :term:`OMERO-5.0-merge-ice33` /
		  :term:`OMERO-5.0-merge-ice34` /
		  :term:`OMERO-5.0-merge-ice35`

	- 	* Review OMERO PRs using a Virtual Appliance
		* :term:`OMERO-merge-stable-virtualbox`
		* :term:`OMERO-5.0-merge-virtualbox`

	- 	* Run the integration tests
		* :term:`OMERO-integration-stable`
		* :term:`OMERO-5.0-merge-integration`

	- 	* Collect the OmeroJava integration test results
		* :term:`OmeroJava-integration-stable`
		* :term:`OMERO-5.0-merge-integration-java`

	- 	* Collect the OmeroPy integration test results
		* :term:`OmeroPy-integration-stable`
		* :term:`OMERO-5.0-merge-integration-python`

	- 	* Collect the broken integration test results
		* :term:`OmeroJava-broken-stable`
		* :term:`OMERO-5.0-merge-integration-broken`

	- 	* Run the robot framework tests
		* :term:`OMERO-merge-robotframework-stable`
		* :term:`OMERO-5.0-merge-robotframework`

	- 	* Update submodules
		* :term:`OMERO-submods-stable`
		* :term:`OMERO-5.0-submods`

	- 	* Install OMERO using Homebrew
		* :term:`OMERO-homebrew-stable`
		* :term:`OME-5.0-homebrew`


4.4.x series
^^^^^^^^^^^^^^^^^^

The branch for the 4.4.x series of OMERO is dev_4_4. All jobs 
are listed under the :jenkinsview:`4.4` view tab of Jenkins.

.. glossary::

	:jenkinsjob:`OMERO-stable`
	:jenkinsjob:`OMERO-stable-ice34`
	:jenkinsjob:`OMERO-stable-ice35`

		This job is used to build the dev_4_4 branch of OMERO with
		Ice 3.3, 3.4 or 3.5

		#. |buildOMERO|
		#. |archiveOMEROartifacts|
		#. If the build is promoted, |promoteOMERO|

	:jenkinsjob:`OMERO-stable-virtualbox`

		This job is used to build a Virtual Appliance from the dev_4_4
		branch of OMERO

		#. |buildVM|

	:jenkinsjob:`OMERO-merge-stable`

		This job is used to review the PRs opened against the dev_4_4
		branch of OMERO with Ice 3.3

		#. |merge| and pushes the merged branch to
		   snoopycrimecop/merge/dev_4_4/latest
		#. |buildOMERO|
		#. |archiveOMEROartifacts|
		#. |deployOMERO| howe.openmicroscopy.org.uk

	:jenkinsjob:`OMERO-merge-stable-ice33`
	:jenkinsjob:`OMERO-merge-stable-ice34`
	:jenkinsjob:`OMERO-merge-stable-ice35`

		This job is used to review the PRs opened against the dev_4_4
		branch of OMERO with Ice 3.3, 3.4 or 3.5

		#. Checks out the merge/dev_4_4/latest branch of the
		   snoopycrimecop fork of openmicroscopy.git_
		#. |buildOMERO|
		#. |archiveOMEROartifacts|

	:jenkinsjob:`OMERO-merge-stable-virtualbox`

		This job is used to build a Virtual Appliance from the dev_4_4
		branch with the PRs opened against the dev_4_4 branch of OMERO

		#. Checks out the merge/dev_4_4/latest branch of the
		   snoopycrimecop fork of openmicroscopy.git_
		#. |buildVM|

	:jenkinsjob:`OMERO-integration-stable`

		This job is used to run the integration tests from the dev_4_4
		branch with the PRs opened against the dev_4_4 branch of OMERO

		#. |merge|
		#. Build OMERO.server and start it
		#. Run the integration tests and collect the results (Java and Python)

	:jenkinsjob:`OmeroJava-integration-stable`

		This job is used for parsing OmeroJava integration test results

		#. Receives TestNG results from :term:`OMERO-integration-stable`,
		#. Generates TestNG report

	:jenkinsjob:`OmeroPy-integration-stable`

		This job is used for parsing OmeroPy integration test results

		#. Receives pytest results from :term:`OMERO-integration-stable`,
		#. Generates pytest report

	:jenkinsjob:`OmeroJava-broken-stable`

		This job is used for parsing OmeroJava integration test results

		#. Receives TestNG results from :term:`OMERO-integration-stable`,
		#. Generates TestNG report

	:jenkinsjob:`OMERO-merge-robotframework-stable`

		This job is used to run the robot framework tests from the
		dev_4_4 branch with the PRs opened against the dev_4_4
		branch of OMERO

		#. Checks out the merge/dev_4_4/latest branch of the
		   snoopycrimecop fork of openmicroscopy.git_
		#. Build OMERO.server and start it
		#. Run the robot framework tests and collect the results

	:jenkinsjob:`OMERO-submods-stable`

		This job is used to update the submodules on the dev_4_4 branch

		#. |updatesubmodules| and pushes the merged branch to
		   snoopycrimecop/merge/dev_4_4/submodules
		#. If the submodules are updated, opens a new PR or updates the
		   existing dev_4_4 submodules PR

	:jenkinsjob:`OMERO-homebrew-stable`

		This job is used to test the installation of OMERO 4.4 using Homebrew

		#. Clean :file:`/usr/local`
		#. Install Homebrew
		#. Run :file:`docs/install/OMERO-homebrew-install.sh`

5.0.x series
^^^^^^^^^^^^^^^^^^

The branch for the 5.0.x series of OMERO is develop. All jobs are listed
under the :jenkinsview:`5.0` view tab of Jenkins.

.. glossary::

	:jenkinsjob:`OMERO-5.0-latest-ice33`
	:jenkinsjob:`OMERO-5.0-latest-ice34`
	:jenkinsjob:`OMERO-5.0-latest-ice35`

		This job is used to build the dev_5_0 branch of OMERO with Ice 3.3,
		3.4 or 3.5

		#. |buildOMERO|
		#. |archiveOMEROartifacts|
		#. If the build is promoted, |promoteOMERO|

	:jenkinsjob:`OMERO-5.0-virtualbox`

		This job is used to build a Virtual Appliance from the dev_5_0 branch
		of OMERO

		#. |buildVM|

	:jenkinsjob:`OMERO-5.0-merge-daily`

		This job is used to review the PRs opened against the develop branch
		of OMERO with Ice 3.3

		#. |merge| and pushes the merged branch to
		   snoopycrimecop/merge/dev_5_0/latest
		#. |buildOMERO|
		#. |archiveOMEROartifacts|
		#. |deployOMERO| gretzky.openmicroscopy.org.uk

	:jenkinsjob:`OMERO-5.0-merge-ice33`
	:jenkinsjob:`OMERO-5.0-merge-ice34`
	:jenkinsjob:`OMERO-5.0-merge-ice35`

		This job is used to review the PRs opened against the develop branch
		of OMERO with Ice 3.3, 3.4 or 3.5

		#. Checks out the merge/develop/latest branch of the
		   snoopycrimecop fork of openmicroscopy.git_
		#. |buildOMERO|
		#. |archiveOMEROartifacts|

	:jenkinsjob:`OMERO-5.0-merge-virtualbox`

		This job is used to build a Virtual Appliance from the develop branch
		with the PRs opened against the develop branch of OMERO

		#. Checks out the merge/develop/latest branch of the
		   snoopycrimecop fork of openmicroscopy.git_
		#. |buildVM|

	:jenkinsjob:`OMERO-5.0-merge-integration`

		This job is used to run the integration tests from the dev_5_0
		branch with the PRs opened against the develop branch of OMERO

		#. |merge|
		#. Build OMERO.server and start it
		#. Run the integration tests and collect the results (Java and Python)


	:jenkinsjob:`OMERO-5.0-merge-integration-java`

		This job is used for parsing OmeroJava integration test results

		#. Receives TestNG results from :term:`OMERO-5.0-merge-integration`,
		#. Generates TestNG report

	:jenkinsjob:`OMERO-5.0-merge-integration-python`

		This job is used for parsing OmeroPy integration test results

		#. Receives pytest results from :term:`OMERO-5.0-merge-integration`,
		#. Generates pytest report

	:jenkinsjob:`OMERO-5.0-merge-integration-broken`

		This job is used for parsing OmeroJava integration test results

		#. Receives TestNG results from :term:`OMERO-5.0-merge-integration`,
		#. Generates TestNG report

	:jenkinsjob:`OMERO-5.0-merge-robotframework`

		This job is used to run the robot framework tests from the
		develop branch with the PRs opened against the dev_5_0
		branch of OMERO

		#. Checks out the merge/develop/latest branch of the
		   snoopycrimecop fork of openmicroscopy.git_
		#. Build OMERO.server and start it
		#. Run the robot framework tests and collect the results

	:jenkinsjob:`OMERO-5.0-submods`

		This job is used to update the submodules on the dev_5_0 branch

		#. |updatesubmodules| and pushes the merge branch to
		   snoopycrimecop/merge/develop/submodules
		#. If the submodules are updated, opens a new PR or updates the
		   existing dev_4_4 submodules PR

	:jenkinsjob:`OME-5.0-homebrew`

		This job is used to test the installation of OMERO 5.0 using Homebrew

		#. Clean :file:`/usr/local`
		#. Install Homebrew
		#. Run :file:`docs/install/OMERO-homebrew-install.sh`

Bio-Formats jobs
----------------

..  |buildBF| replace:: Builds Bio-Formats using ``ant clean jars tools tools-ome utils dist-bftools``
..  |testBF| replace:: Runs Bio-Formats tests using ``ant test-common test-ome-xml test-formats test-ome-io``
..  |fulltestBF| replace:: Runs Bio-Formats full test-suite using ``ant test``

All jobs are listed under the :jenkinsview:`Bio-Formats` view tab of Jenkins.

.. list-table::
	:header-rows: 1

	- 	* Job task
		* 4.4.x series
		* 5.0.x series

	- 	* Build Bio-Formats
		* :term:`BIOFORMATS-stable`
		* :term:`BIOFORMATS-5.0`

	- 	* Publish Bio-Formats to the LOCI Nexus repository
		* :term:`BIOFORMATS-maven-stable`
		* :term:`BIOFORMATS-5.0-maven`

	- 	* Review Bio-Formats PRs
		* :term:`BIOFORMATS-merge-stable`
		* :term:`BIOFORMATS-5.0-merge-daily`

	- 	* Run automated tests against directories on squig
		* :term:`BIOFORMATS-full-repository-stable`
		* :term:`BIOFORMATS-5.0-full-repository`

	- 	* Run openBytes performance test
		* :term:`BIOFORMATS-openbytes-performance-stable` / :term:`BIOFORMATS-omero-openbytes-stable`
		* :term:`BIOFORMATS-5.0-merge-openbytes-performance`

4.4.x series
^^^^^^^^^^^^^^^^^^

The branch for the 4.4.x series of Bio-Formats is dev_4_4.

.. glossary::

	:jenkinsjob:`BIOFORMATS-stable`

		This job is used to build the dev_4_4 branch of Bio-Formats

		#. |buildBF|
		#. |testBF|

	:jenkinsjob:`BIOFORMATS-maven-stable`

		This job is used to publish the dev_4_4 branch of Bio-Formats
		to the LOCI Nexus repository

	:jenkinsjob:`BIOFORMATS-merge-stable`

		This job is used to review the PRs opened against the dev_4_4
		branch of Bio-Formats by running basic unit tests, checking for open
		file handles, and checking for regressions across a representative
		subset of the data repository

		#. |merge|
		#. |buildBF|
		#. |fulltestBF|

	:jenkinsjob:`BIOFORMATS-full-repository-stable`

		This job is used to review the PRs opened against the dev_4_4
		branch of Bio-Formats by running automated tests against directories
		on squig

		#. |merge|
		#. Run tests against directories configured by ``--test dirname``
		   comments on the PRs

	:jenkinsjob:`BIOFORMATS-omero-openbytes-stable`

		This job is used to review the PRs opened against the dev_4_4
		branch of Bio-Formats by running OMERO openBytes tests against
		directories on squig

		#. |merge|
		#. Run ``loci.tests.testng.OmeroOpenBytesTest`` tests against
		   directories specified by :file:`BIOFORMATS-omero-openbytes.txt`

	:jenkinsjob:`BIOFORMATS-openbytes-performance-stable`

		This job is used to review the PRs opened against the dev_4_4
		branch of Bio-Formats by running openBytes performance tests against
		directories on squig

		#. |merge|
		#. Run ``loci.tests.testng.OpenBytesPerformanceTest`` tests against
		   directories specified by
		   :file:`BIOFORMATS-openbytes-performance.txt`

5.0.x series
^^^^^^^^^^^^^^^^^^

The branch for the 5.0.x series of Bio-Formats is dev_5_0.

.. glossary::

	:jenkinsjob:`BIOFORMATS-5.0`

		This job is used to build the dev_5_0 branch of Bio-Formats

		#. |buildBF|
		#. |testBF|

	:jenkinsjob:`BIOFORMATS-5.0-maven`

		This job is used to publish the dev_5_0 branch of Bio-Formats to the
		LOCI Nexus repository

	:jenkinsjob:`BIOFORMATS-5.0-merge-daily`

		This job is used to review the PRs opened against the dev_5_0 branch
		of Bio-Formats by running basic unit tests, checking for open file
		handles, and checking for regressions across a representative subset
		of the data repository

		#. |merge|
		#. |buildBF|
		#. |fulltestBF|

	:jenkinsjob:`BIOFORMATS-5.0-full-repository`

		This job is used to review the PRs opened against the dev_5_0 branch
		of Bio-Formats by running automated tests against directories on squig

		#. |merge|
		#. Run tests against directories configured by ``--test dirname``
		   comments on the PRs

	:jenkinsjob:`BIOFORMATS-5.0-merge-openbytes-performance`

		This job is used to review the PRs opened against the dev_5_0
		branch of Bio-Formats by running openBytes performance tests against
		directories on squig

		#. |merge|
		#. Run ``loci.tests.testng.OmeroOpenBytesTest`` and 
		   ``loci.tests.testng.OpenBytesPerformanceTest`` tests against
		   directories specified by
		   :file:`BIOFORMATS-openbytes-performance.txt`


..  |sphinxbuild| replace:: Runs ``make clean html latexpdf`` to build the HTML and PDF versions of the Sphinx documentation
..  |linkcheck| replace:: Runs ``make linkcheck`` and :ref:`parse the Sphinx linkcheck output <linkcheck_parser>`
..  |ssh-doc| replace:: Copies the HTML and PDF documentation over SSH to
..  |deploy-doc| replace:: Runs :ref:`scc deploy` to update

Documentation jobs
------------------

All documentation jobs are listed under the :jenkinsview:`Docs <Docs>` view
tab of Jenkins.

.. list-table::
	:header-rows: 1

	- 	* Job task
		* Current release
		* 5.0.x series 

	- 	* Publish OMERO documentation
		* :term:`OMERO-docs-release-stable`
		* :term:`OMERO-5.0-docs-release`

	- 	* Publish Bio-Formats documentation
		* :term:`BIOFORMATS-docs-release-stable`
		* :term:`BIOFORMATS-5.0-docs-release`

	- 	* Publish OME Model documentation
		* 
		* :term:`FORMATS-docs-release`

	- 	* Publish OME Contributing documentation
		*
		* :term:`CONTRIBUTING-docs-release`

	- 	* Review OMERO documentation PRs
		* :term:`OMERO-docs-merge-stable`
		* :term:`OMERO-5.0-docs-merge`

	- 	* Review Bio-Formats documentation PRs
		* :term:`BIOFORMATS-docs-merge-stable`
		* :term:`BIOFORMATS-5.0-docs-merge`

	- 	* Review OME Model documentation PRs
		* 
		* :term:`FORMATS-docs-merge`

	- 	* Review OME Contributing documentation PRs
		*
		* :term:`CONTRIBUTING-docs-merge`

Configuration
^^^^^^^^^^^^^

For all jobs building documentation using Sphinx, the HTML documentation theme
hosted at https://github.com/openmicroscopy/sphinx_theme repository is copied
to the relevant :file:`themes/` folder. The following environment variables
are then used:

- the Sphinx building options, :envvar:`SPHINXOPTS`, is set to
  ``-W -D html_theme=sphinx_theme``,

- the release number of the documentation is set by :envvar:`OMERO_RELEASE`,
  :envvar:`BF_RELEASE` or :envvar:`FORMATS_RELEASE`,

- the source code links use :envvar:`SOURCE_USER` and :envvar:`SOURCE_BRANCH`,

- for the Bio-Formats and OMERO sets of documentation, the name of the
  Jenkins job is set by :envvar:`JENKINS_JOB`.

4.4.x series
^^^^^^^^^^^^

The branch for the current release of OMERO/Bio-Formats is dev_4_4.

.. glossary::

	:jenkinsjob:`OMERO-docs-release-stable`

		This job is used to build the dev_4_4 of the OMERO documentation
		and publish the official documentation for the current release of
		OMERO

		#. |sphinxbuild|
		#. |linkcheck|
		#. If the build is promoted,
			#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/omero-stable-release.tmp`
			#. |deploy-doc| http://www.openmicroscopy.org/site/support/omero4/

	:jenkinsjob:`BIOFORMATS-docs-release-stable`

		This job is used to build the dev_4_4 of the Bio-Formats
		documentation and publish the official documentation for the current
		release of Bio-Formats

		#. |sphinxbuild|
		#. |linkcheck|
		#. If the build is promoted,
			#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/bf-stable-release.tmp`
			#. |deploy-doc| http://www.openmicroscopy.org/site/support/bio-formats4/

	:jenkinsjob:`OMERO-docs-merge-stable`

		This job is used to review the PRs opened against the dev_4_4
		branch of the OMERO documentation

		#. |merge|
		#. |sphinxbuild|
		#. |linkcheck|
		#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/omero-stable-staging.tmp`
		#. |deploy-doc| http://www.openmicroscopy.org/site/support/omero4-staging/

	:jenkinsjob:`BIOFORMATS-docs-merge-stable`

		This job is used to review the PRs opened against the dev_4_4
		branch of the Bio-Formats documentation

		#. |merge|
		#. |sphinxbuild|
		#. |linkcheck|
		#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/bf-stable-staging.tmp`
		#. |deploy-doc| http://www.openmicroscopy.org/site/support/bio-formats4-staging/

5.0.x series
^^^^^^^^^^^^^^^^^^

The branch for the 5.0.x series of OMERO/Bio-Formats/OME model and
the Contributing documentation is develop.

.. glossary::

	:jenkinsjob:`OMERO-5.0-docs-release`

		This job is used to build the dev_5_0 branch of the OMERO
		documentation and publish the official documentation for the next
		major release of OMERO

		#. |sphinxbuild|
		#. |linkcheck|
		#. If the build is promoted,
			#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/omero-5.0-release.tmp`
			#. |deploy-doc| http://www.openmicroscopy.org/site/support/omero5/

	:jenkinsjob:`BIOFORMATS-5.0-docs-release`

		This job is used to build the dev_5_0 branch of the Bio-Formats
		documentation and publish the official documentation for the next
		major release of Bio-Formats

		#. |sphinxbuild|
		#. |linkcheck|
		#. If the build is promoted,
			#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/bf-5.0-release.tmp`
			#. |deploy-doc| http://www.openmicroscopy.org/site/support/bio-formats5/

	:jenkinsjob:`FORMATS-docs-release`

		This job is used to build the develop branch of the OME Model
		documentation and publish the official documentation

		#. |sphinxbuild|
		#. |linkcheck|
		#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/formats-release.tmp`
		#. |deploy-doc| http://www.openmicroscopy.org/site/support/ome-model/

	:jenkinsjob:`CONTRIBUTING-docs-release`

		This job is used to build the develop branch of the OME Contributing
		documentation and publish the official documentation

		#. |sphinxbuild|
		#. |linkcheck|
		#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/contributing-release.tmp`
		#. |deploy-doc| http://www.openmicroscopy.org/site/support/contributing/

	:jenkinsjob:`OMERO-5.0-docs-merge`

		This job is used to review the PRs opened against the dev_5_0 branch
		of the OMERO documentation

		#. |merge|
		#. |sphinxbuild|
		#. |linkcheck|
		#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/omero-5.0-staging.tmp`
		#. |deploy-doc| http://www.openmicroscopy.org/site/support/omero5-staging/

	:jenkinsjob:`BIOFORMATS-5.0-docs-merge`

		This job is used to review the PRs opened against the dev_5_0 branch
		of the Bio-Formats documentation

		#. |merge|
		#. |sphinxbuild|
		#. |linkcheck|
		#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/bf-5.0-staging.tmp`
		#. |deploy-doc| http://www.openmicroscopy.org/site/support/bio-formats5-staging/

	:jenkinsjob:`FORMATS-docs-merge`

		This job is used to review the PRs opened against the develop branch
		of the OME Model documentation

		#. |merge|
		#. |sphinxbuild|
		#. |linkcheck|
		#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/formats-staging.tmp`
		#. |deploy-doc| http://www.openmicroscopy.org/site/support/ome-model-staging/

	:jenkinsjob:`CONTRIBUTING-docs-merge`

		This job is used to review the PRs opened against the develop branch
		of the OME Contributing documentation

		#. |merge|
		#. |sphinxbuild|
		#. |linkcheck|
		#. |ssh-doc| :file:`/var/www/www.openmicroscopy.org/sphinx-docs/contributing-staging.tmp`
		#. |deploy-doc| http://www.openmicroscopy.org/site/support/contributing-staging/

.. _linkcheck_parser:

Linkcheck output parser
^^^^^^^^^^^^^^^^^^^^^^^

.. _Warnings Plugin: https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin

The :file:`output.txt` file generated by Sphinx ``linkcheck`` builder is
parsed using the `Warnings Plugin`_. Depending on the nature of the links,
warnings are generated as described in the following table:

====== ================ ========
Type   Error code       Priority
====== ================ ========
local                   High
broken HTTP Error 404   Normal
broken Anchor not found Normal
broken HTTP Error 403   Low
====== ================ ========

The build is marked as FAILED or UNSTABLE if the number of warnings of a given
category exceeds a threshold. The table below lists the thresholds used for
all the documentation builds:

======== ====== ========
Priority FAILED UNSTABLE
======== ====== ========
High     0
Normal          0
Low             10
======== ====== ========
